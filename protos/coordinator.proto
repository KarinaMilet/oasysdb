syntax = "proto3";
package coordinator;

import "google/protobuf/empty.proto";

service CoordinatorNode {
    rpc Heartbeat(google.protobuf.Empty) returns (google.protobuf.Empty);
    rpc Insert(Record) returns (google.protobuf.Empty);
    rpc RegisterNode(NodeConnection) returns (NodeParameters);
}

// Section: RegisterNode
    message NodeConnection {
        string name = 1;
        string address = 2; // Public data node address -> IP:PORT
    }

    message NodeParameters {
        Metric metric = 1;
        int32 dimension = 2;
        int32 density = 3;
    }

// Shared Types
    enum Metric {
        COSINE = 0;
        EUCLIDEAN = 1;
    }

    message Record {
        repeated float vector = 1;
        map<string, Value> metadata = 2;
    }

    message Value {
        oneof data {
            string text = 1;
            int32 integer = 2;
            float float = 3;
            bool boolean = 4;
        }
    }
