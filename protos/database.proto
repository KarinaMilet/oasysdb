syntax = "proto3";
package database;

import "google/protobuf/empty.proto";

service Database {
    rpc CreateCollection(CreateCollectionRequest) returns (google.protobuf.Empty);
    rpc DeleteCollection(DeleteCollectionRequest) returns (google.protobuf.Empty);

    rpc AddFields(AddFieldsRequest) returns (google.protobuf.Empty);
    rpc RemoveFields(RemoveFieldsRequest) returns (google.protobuf.Empty);

    rpc InsertRecords(InsertRecordsRequest) returns (google.protobuf.Empty);
}

// region CreateCollection
    message CreateCollectionRequest {
        string name = 1;
    }

// region DeleteCollection
    message DeleteCollectionRequest {
        string name = 1;
    }

// region AddFields
    message Field {
        string name = 1;
        string datatype = 2;
        bool nullable = 3;
    }

    message AddFieldsRequest {
        string collection_name = 1;
        repeated Field fields = 2;
    }

// region RemoveFields
    message RemoveFieldsRequest {
        string collection_name = 1;
        repeated string field_names = 2;
    }

// region InsertRecords
    message Record {
        repeated Data data = 1;
    }

    // The goal is to simulate a batch insert operation in SQL.
    message InsertRecordsRequest {
        string collection_name = 1;
        repeated string field_names = 2;
        repeated Record records = 3;
    }

// Custom reusable data types.

message Vector {
    repeated float values = 1;
}

message Data {
    // This value type should match the data type supported
    // by OasysDB in the types/metadata.rs file
    oneof value {
        string string_value = 1;
        int32 integer_value = 2;
        bool boolean_value = 3;
        float float_value = 4;
        Vector vector_value = 5;
    }
}
